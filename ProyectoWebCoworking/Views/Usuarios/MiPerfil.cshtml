@model ProyectoWebCoworking.Models.Usuario
@{
	ViewData["Title"] = "Mi Perfil";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-5 mb-5">
	<div class="row justify-content-center">
		<div class="col-lg-8">

			@if (TempData["MensajeExito"] != null)
			{
				<div class="alert alert-success alert-dismissible fade show shadow-sm mb-4" role="alert">
					<i class="bi bi-check-circle-fill me-2"></i><strong>¡Éxito!</strong> @TempData["MensajeExito"]
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
				</div>				
			}

			<div class="card shadow-lg border-0 rounded-lg">

				<div class="card-header bg-primary text-white p-4">
					<div class="d-felx align-items-center">
						<i class="bi bi-person-circle display-4 me-3"></i>
						<div> 
							<h3 class="mb-0">Mi Perfil</h3>
							<p class="mb-0 text-white-50">Gestiona tu información personal y seguridad</p>
						</div>
					</div>
				</div>

				<div class="card-body p-5">
					<form asp-action="MiPerfil" method="post">

						<div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
						<input type="hidden" asp-for="Id" />
						<input type="hidden" asp-for="Rol" />
						<input type="hidden" asp-for="ContraseñaHash" />

						<h5 class="text-primary mb-3"><i class="bi bi-card-heading me-2"></i>Datos Personales</h5>

						<div class="row">
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<input asp-for="Nombre" class="form-control" placeholder="Nombre" />
									<label asp-for="Nombre">Nombre</label>
									<span asp-validation-for="Nombre" class="text-danger"></span>
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<input asp-for="Apellidos" class="form-control" placeholder="Apellidos" />
									<label asp-for="Apellidos">Apellidos</label>
									<span asp-validation-for="Apellidos" class="text-danger"></span>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<input asp-for="Email" class="form-control" placeholder="Email" readonly style="background: #e9ecef" />
									<label asp-for="Email">Correo Electrónico</label>
									<span asp-validation-for="Email" class="text-danger"></span>
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<input asp-for="Teléfono" class="form-control" placeholder="Teléfono" />
									<label asp-for="Teléfono">Teléfono</label>
									<span asp-validation-for="Teléfono" class="text-danger"></span>
								</div>
							</div>
						</div>

						<hr class="my-4 text-muted" />

						<h5 class="text-primary mb-3"><i class="bi bi-shield-lock me-2"></i>Seguridad</h5>

						<div class="card bg-light border-0 mb-4">
							<div class="card-body">
								<label class="form-label fw-bold small text-uppercase text-muted">Para guardar cambios, confirma tu identidad:</label>
								<div class="form-floating">
									<input asp-for="PasswordActual" class="form-control" type="password" placeholder="Contraseña Actual" autocomplete="current-password" />
									<label asp-for="PasswordActual">Contraseña Actual</label>
								</div>
								<span asp-validation-for="PasswordActual" class="text-danger small"></span>
							</div>
						</div>

						<p>
							<a class="text-decoration-none fw-bold" data-bs-toggle="collapse" href="#collapsePassword" role="button" aria-expanded="false">
								<i class="bi bi-key me-1"></i> ¿Quieres cambiar tu contraseña?
							</a>
						</p>

						<div class="collapse" id="collapsePassword">
							<div class="card card-body border-warning mb-3 bg-warning bg-opacity-10">
								<div class="row">
									<div class="col-md-6">
										<div class="form-floating mb-3">
											<input asp-for="NuevaPassword" class="form-control" type="password" placeholder="Nueva" autocomplete="new-password" />
											<label asp-for="NuevaPassword">Nueva Contraseña</label>
											<span asp-validation-for="NuevaPassword" class="text-danger"></span>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-floating mb-3">
											<input asp-for="ConfirmarPassword" class="form-control" type="password" placeholder="Confirmar" autocomplete="new-password" />
											<label asp-for="ConfirmarPassword">Confirmar Nueva</label>
											<span asp-validation-for="ConfirmarPassword" class="text-danger"></span>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="d-flex justify-content-end gap-2 mt-4">
							<a asp-controller="Home" asp-action="Index" class="btn btn-outline-secondary">Cancelar</a>
							<button type="submit" class="btn btn-primary px-4">Guardar Cambios</button>
						</div>
					</form>
				</div>					
			</div>
		</div>
	</div>
</div>
